namespace PacGame
{
    internal class Program
    {
        static void Main(string[] args)
        {
            Console.CursorVisible = false;
            Console.SetCursorPosition(20, 0);
            Console.WriteLine("|--- PacGame ---|");
            Console.SetCursorPosition(0, 2);
            Console.WriteLine("------------------------------------------------------------");
            Console.SetCursorPosition(0, 3);

            string[,] map = new string[15, 30];

            for (int i = 3; i < 15; i++)
            {
                for (int j = 3; j < 30; j++)
                {
                    Console.Write(map[i, j] = "☼ ");
                    //Thread.Sleep(1);
                }
                Console.WriteLine();
            }

            Console.WriteLine("------------------------------------------------------------");

            int x = 7;
            int y = 15;
            int PrevX = x;
            int PrevY = y;
            int score = 0;


            Console.SetCursorPosition(y * 2, x);
            Console.WriteLine(map[x, y] = "D ");

            while (true)
            {
                var ch = Console.ReadKey().Key;

                switch (ch)
                {
                    case ConsoleKey.UpArrow:
                        if (x > 3) x--;
                        break;
                    case ConsoleKey.DownArrow:
                        if (x < 14) x++;
                        break;
                    case ConsoleKey.LeftArrow:
                        if (y > 0) y--;
                        break;
                    case ConsoleKey.RightArrow:
                        if (y < 26) y++;
                        break;
                    default:
                        break;
                }

                CursorPosition();
            }


            void CursorPosition()
            {
                if (map[x, y] == "☼ ")
                {
                    score++;
                }
                Console.SetCursorPosition(PrevY * 2, PrevX);
                Console.WriteLine(map[PrevX, PrevY] = " ");
                
                Console.SetCursorPosition(y * 2, x);
                Console.WriteLine(map[x, y] = "D ");

                PrevY = y;
                PrevX = x;

                Console.SetCursorPosition(0, 1);
                Console.WriteLine($"Score: {score}");

                if (score == 287)//287 score
                {
                    Console.Clear();
                    
                    Console.WriteLine(@"
                                       
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
─██████──────────██████─██████████─██████──────────██████─██████──────────██████─██████████████─████████████████───██████─
─██░░██──────────██░░██─██░░░░░░██─██░░██████████──██░░██─██░░██████████──██░░██─██░░░░░░░░░░██─██░░░░░░░░░░░░██───██░░██─
─██░░██──────────██░░██─████░░████─██░░░░░░░░░░██──██░░██─██░░░░░░░░░░██──██░░██─██░░██████████─██░░████████░░██───██░░██─
─██░░██──────────██░░██───██░░██───██░░██████░░██──██░░██─██░░██████░░██──██░░██─██░░██─────────██░░██────██░░██───██░░██─
─██░░██──██████──██░░██───██░░██───██░░██──██░░██──██░░██─██░░██──██░░██──██░░██─██░░██████████─██░░████████░░██───██░░██─
─██░░██──██░░██──██░░██───██░░██───██░░██──██░░██──██░░██─██░░██──██░░██──██░░██─██░░░░░░░░░░██─██░░░░░░░░░░░░██───██░░██─
─██░░██──██░░██──██░░██───██░░██───██░░██──██░░██──██░░██─██░░██──██░░██──██░░██─██░░██████████─██░░██████░░████───██████─
─██░░██████░░██████░░██───██░░██───██░░██──██░░██████░░██─██░░██──██░░██████░░██─██░░██─────────██░░██──██░░██────────────
─██░░░░░░░░░░░░░░░░░░██─████░░████─██░░██──██░░░░░░░░░░██─██░░██──██░░░░░░░░░░██─██░░██████████─██░░██──██░░██████─██████─
─██░░██████░░██████░░██─██░░░░░░██─██░░██──██████████░░██─██░░██──██████████░░██─██░░░░░░░░░░██─██░░██──██░░░░░░██─██░░██─
─██████──██████──██████─██████████─██████──────────██████─██████──────────██████─██████████████─██████──██████████─██████─
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────");
                }
            }

            
        }
    }
}
